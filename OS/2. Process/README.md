## 2. 프로세스

### (1) 프로세스의 정의

- **프로세스**의 정의
  - 수행 중인 프로그램
  - 컴퓨터 상에 수행 중인 프로그램의 인스턴스
  - 처리기에 할당되어 수행될 수 있는 개체
  - 명령들의 순차 수행, 현재 상태, 연계된 시스템 자원들의 집합 등에 의해 특정지어는 활성화 단위

- **프로세스 제어 블록(Process Control Block)**: 프로세스는 프로그램 코드와 데이터의 집합, 프로세스 제어블록 세 가지 요소로 이루어져 있다. 처리기가 프로그램 코드를 수행한다고 가정하면,
그 수행 중인 개체가 프로세스이다. 프로그램이 수행 중 특점 시점에, 프로세스는 다음을 포함한 여러 가지 요소들에 의해 유일하게 식별될 수 있다.
  - **식별자**: 각 프로세스를 다른 모든 프로세스로부터 구별하게 해주는 유일한 식별자
  - **상태**: 프로세스가 현재 수행 중이면, 그 프로세스는 수행 상태에 있다.
  - **우선순위**: 다른 프로세스들에 대해 상대적인 우선순위 수준
  - **프로그램 카운터**: 프로그램에서 다음에 수행될 명령어의 수준
  - **메모리 포인터**: 프로세스와 연계된 프로그램 코드 및 데이터, 다른 프로세스들과 함께 공유되는 메모리 블록에 대한 포인터를 포함한다.
  - **문맥 데이터**: 프로세스가 수행 중일 때, 처리기의 레지스터에 존재하는 데이터
  - **입출력 상태 정보**: 미해결 입출력 요청, 프로세스에 할당된 입출력 장치, 프로세스에 의해 사용 중인 파일들의 리스트를 포함한다.
  - **어카운팅 정보**: 사용된 처리기 시간 및 클록 시간, 시간 제한, 계정 번호 등을 포함할 수 있다.


  ![프로세스 제어블록](https://user-images.githubusercontent.com/56579239/153384250-86f74885-6b41-4147-9960-432cb2359d17.png)
  
  위의 목록들의 정보는 전형적으로 프로세스 제어블록이라는 자료구조에 저장되며, 프로세스 제어블록은 운영체제에 의해 생성되어 관리된다. 프로세스 제어블록의 주요 역할은 수행 프로세스를 인터럽트 한 후 나중에
  그 인터럽트가 발생되지 않은 것처럼 프로세스 수행을 재개할 수 있도록 충분한 정보를 유지하는 것이다. 프로세스 제어블록은 운영체제로 하여금 다수의 프로세스를 지원하고 멀티프로세싱을 제공할 수 있게
  해 주는 주요 도구이다.

### (2) 프로세스 상태

- 프로세스 궤적: 개별 프로세스 행위의 특성은 그 프로세스를 위해 수행되는 일련의 명령어 리스트로 표현될 수 있다. 이러한 리스트를 프로세스의 **궤적(trace)** 이라 할 수 있다. 
처리기 행위의 특징은 다양한 프로세스들의 궤적이 어떻게 인터리빙 되는지를 보임으로써 표현될 수 있다.


  ![프로세스 궤적 1](https://user-images.githubusercontent.com/56579239/153384250-86f74885-6b41-4147-9960-432cb2359d17.png)
  ![프로세스 궤적 2](https://user-images.githubusercontent.com/56579239/153384250-86f74885-6b41-4147-9960-432cb2359d17.png)
  ![프로세스 궤적 3](https://user-images.githubusercontent.com/56579239/153384250-86f74885-6b41-4147-9960-432cb2359d17.png)
  
- **2-상태 프로세스 모델**: 운영체제의 주요 업무는 프로세스의 수행을 제어하는 것이다. 여기에는 프로세스의 수행을 인터리빙 하는 패턴을 결정하는 일과 자원을 프로세스에게 할당하는 일이 포함된다.
프로세스 제어를 위한 운영체제 설계의 첫 단계는 프로세스가 보여 주어야 할 행태를 기술하는 것이다. 어떤 주어진 시점에 하나의 프로세스는 수행 중이거나 그렇지 않다는 건 관찰을 통해 가장
간단하면서도 현실성 있는 모델을 구성할 수 있다. 이 모델에서, 프로세스는 두 가지 상태(**수행**, **비수행**) 중의 한 상태에 있게 된다. 운영체제는 프로세스를 생성할 때, 그 프로세스에 대한
프로세스 제어블록을 생성하고 그 프로세스를 시스템 내에 비수행 상태로 초기화시킨다. 이제 프로세스는 존재 하게 되며 운영체제에 알려져 자신이 수행될 기회를 기다린다.

  ![2-상태 프로세스 모델](https://user-images.githubusercontent.com/56579239/153384250-86f74885-6b41-4147-9960-432cb2359d17.png)
  
- 프로세스의 생성과 종료: 현재 관리되고 있는 프로세스 집단에 새로운 프로세스를 추가하고자 할 때, 운영체제는 그 프로세스를 관리하기 위해 필요한 자료구조를 만들고, 그 프로세스에게 주기억장치
내의 주소공간을 할당한다. 일반적으로 네 가지 사건이 발생했을 때 프로세스가 생성된다.
  - 새로운 일괄처리 작업: 보통 테이프나 디스크를 통해 운영체제에게 일괄처리 작업 제어 스트림이 제공된다. 운영체제가 새로운 작업을 처리할 준비가 되면, 다음에 수행할 일련의 작업제어 명령을 읽어 들일 것이다.
  - 대화형 로그온: 사용자가 터미널에서 시스템에 로그온 한다.
  - 서비스를 제공하기 위해 운영체제가 생성: 사용자가 대기할 필요 없도록, 운영체제는 사용자 프로그램을 대신해 어떤 기능을 수행할 프로세스를 생성할 수 있다.
  - 기존 프로세스에 의한 생성: 모듈화를 위해서나 병령성을 활용하기 위해, 사용자 픞로그램은 많은 프로세스의 생성을 명령할 수 있다.
  
  어떤 컴퓨터 시스템이든 프로세스가 수행 완료를 표시할 수 있는 수단을 제공해야 한다. 일괄처리에서 작업의 종료는 중지 명령이나 명시적으로 운영체제 서비스 호출을 수행함으로써 이루어진다.
  중지 명령어는 프로세스가 완료되었다는 사실을 운영체제에게 통보하기 위해 인터럽트를 발생 시킨다. 대화식 응용의 경우, 사용자의 행동에 의해 프로세스의 수행 완료가 표시된다. PC나 워크스테이션
  상에서 사용자는 응용을 중단시킬 수 있다. 이러한 모든 행동은 궁극적으로 해당 프로세스를 종료시키기 위해 운영체제에게 서비스를 요청하게 된다. 또한 여러 종류의 오류 및 결함 상태로 인해 프로세스가 종료될 수 있다. 마지막으로 운영체제에서는 프로세스가 그 자신을 생성한 프로세스에 의해서 종료되거나 부모 프로세스가 종료될 때 같이 종료되기도 한다.
  
- **5-상태 프로세스 모델**: 모든 프로세스들이 항상 수행할 준비가 되어 있다면, 2-상태 모델이 효과적일 것이다. 하지만 2-상태 모델에서는 비수행 상태의 프로세스를 수행할 프로세스로 선정하는 데에
  큐를 이용한 선입선출을 리스트를 사용하고, 처리기는 수행 가능한 프로세스를 라운드-로빈 형식으로 처리한다. 이러한 경우 2-상태 모델의 구현 방법을 적절하지 않다. 비수행 상태에 있는 어떤
  프로세스들은 수행할 준비가 되어 있지만, 다른 프로세스들은 입출력 연산이 완료되기를 기다리면서 블록되어 있을 수 있다. 따라서 단일 큐를 사용할 때 디스패처는 단순히 큐의 맨 끝에서부터
  프로세스를 선택하지 않아야 한다.
  
  이러한 상황을 보다 자연스럽게 처리하기 위해서는 비수행 상태를 준비 상태와 블록 상태로 분할하는 것이 좋다. 적절한 대책으로 또 다른 두 가지 상태를 추가하였다. 새로운 다이어그램에 나타난
  다섯 가지 상태는 다음과 같다.
  
  ![5-상태 프로세스 모델](https://user-images.githubusercontent.com/56579239/153384250-86f74885-6b41-4147-9960-432cb2359d17.png)
  
  - **수행(Running)**: 현재 수행 중인 프로세스
  - **준비(Ready)**: 기회가 주어지면 수행될 준비가 되어 있는 프로세스
  - **블록/대기(Blocked/Waiting)**: 입출력 연산 완료 등과 같은 어떤 이벤트가 발생할 때까지 수행될 수 없는 프로세스
  - **생성(New, 시작)**: 지금 막 생성되었지만 운영체제에 의해 수행 가능한 프로세스 풀로 진입이 아직 허용되지 않은 프로세스
  - **종료(Exit)**:  프로세스 수행이 중지되거나 어떤 이유로 중단되었기 때문에 운영체제에 의해 수행가능 프로세스 풀에서 방출된 프로세스
  
  프로세스의 상태 전이를 일으키는 이벤트들의 종류가 나타나 있다. 가능한 전이는 다음과 같다.
  - **널(Null) -> 생성**: 어떤 프로그램을 수행하기 위해 새로운 프로세스가 생성된다.
  - **생성 -> 준비**: 운영체제가 새로 생성된 프로세스를 받아들일 준비가 되었을 때, 그 프로세스를 생성 상태에서 준비 상태로 전이시킨다.
  - **준비 -> 수행**: 수행할 프로세스를 선택할 때가 되면, 운영체제는 준비 상태에 있는 프로세스들 중 하날르 선택한다.
  - **수행 -> 종료**: 현재 수행 중인 프로세스가 작업을 완료하거나 수행이 중단되면 운영체제는 그 프로세스를 종료시킨다.
  - **수행 -> 준비**: 이 전이가 발생하는 가장 일반적인 경우는 수행되고 있던 프로세스가 처리기 시간을 모두 사용했을 경우이다. 이외에 *선점*의 경우에도 이 전이가 발생한다.
  - **수행 -> 블록**: 프로세스가 자원을 요구했는데 기다려야 한다면 블록 상태로 전이된다.
  - **블록 -> 준비**: 블록 상태에 있는 프로세스는 자신이 기다리고 있던 이벤트가 발생하게 되면 준비상태로 전이된다.
  
- **보류된 프로세스(Suspended Process)**: 
  
  

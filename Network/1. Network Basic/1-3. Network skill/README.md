### (2) 네트워크 기술

#### (1) 교환 시스템

네트워크 양단에 연결된 호스트들이 전송하는 패킷은 전송 경로 주간에 위치한 교환 시스템을 거친다. 교환시스템은 데이터를 최종 목적지까지 올바른 경로로 중개하는 **교환** 기능을 제공한다.

##### (1) 교환 시스템의 종류

전송 선로를 이용해 데이터를 전송할 때는 전용 회선을 이용하거나 교환 회선을 이용할 수 있다. 전용 회선 방식에서는 송신 호스트와 수신 호스트가 전용으로 할당된 통신 선로로 데이터를 전송하지만, 교환 회선 방식에서는 전송 선로 하나를 다수의 사용자가 공유한다.

일반적으로 전화 서비스와 같은 공중 전화망은 교환 회선 방식을 사용한다. 교환 회선 방식을 이용해 데이터를 주고 받으려면 중간에 취히나 교환 시스템의 중개가 필요하다. 교환기와 전송 선로들은 바깥에 있는 호스트들이 데이터를 송수신하기 위해 공유하는 자원이다.

호스트에서 호스트로 데이터를 보내려면 먼저 연결 설정을 통해 전송 경로를 결정해야 한다. 어떤 경로가 더 나을지는 전송 시점에서의 네트워크 혼잡도 등 여러 요인에 따라 다라진다. 특정 전송 선로에 데이터가 집중되지 않으면서 효율적인 경로를 선택할 수 있도록 하는 것이 교환기의 중요한 역할이다.

![3-1. 회선 교환과 패킷 교환](C:\Users\SH.C\Desktop\네트워크\3-1. 회선 교환과 패킷 교환.jpg)

###### (1) 회선 교환

**회선 교환** 방식은 `고정 대역으로 할당된 연결을 설정하여 데이터 전송`을 시작한다. 따라서 회선에 할당된 고정 크기의 안정적인 전송률로 데이털르 전송할 수 있으며, 연결이 유지되는 동안에는 다른 연결에서 이 대역을 사용할 수 없다. 데이터의 전송 경로가 연결 설정되는 과정에서 확정되므로 라우팅 작업이 상대적으로 쉽다. 그리고 고정 대역폭의 전송률을 지원하므로ㅜ 네트워크 구조가 상대적으로 단순하다.

###### (2) 메시지 교환

**메시지 교환** 방식은 데이터를 전송하기 전에 경로를 미리 설정하지 않고, 대신 전송하는 `메시지의 헤더마다 목적지 주소를 표시하는 방식`이다. 중간의 교환 시스템은 이전 교환 시스템에서 보낸 전체 메시지가 도착할 때까지 받은 메시지를 일시적으로 버퍼에 저장한다. 이후 모든 메시지가 도착하면 다음 교환 시스템으로 전달하는 방식을 사용하므로 데이터 전송이교환기 단위로 이루어진다. 따라서 메시지 교환 방식은 송신 호스트가 전송하는 전체 데이터가 하나의 단위로 교환 처리된다고 볼 수 있다.

메시지 교환의 장점은 교환 시스템에서 전송 데이터를 저장하는 기능을 제공하기 때문에 송신 호스트가 보낸 시점과 수신 호스트가 받은 시점이 반드시 일치할 필요가 없다는 것이다.

###### (3) 패킷 교환

**패킷 교환** 방식은 `가변 대역의 전송률을 지원`해 네트워크 구조가 복잡하다. 데이터를 미리 패킷 단위로 나누어 전송하며, 각 패킷은 독립적으로 라우팅 과정을 거쳐 목적지에 도착한다. 데이터 전송을 위한 전송 대역을 따로 할당하지 않기 때문에 가변 크기의 전송률을 지원한다. 패킷 교환에는 `모든 패킷의 경로를 일정하게 유지`시키는 **가상 회선** 방식과 `패킷들이 각각의 경로로 전송`되는 **데이터 그램**이 있다.

패킷 교환 시스템의 장점은 다음과 같다.

- **전송 대역의 효율적 이용**: 여러 호스트에서 전송한 패킷들이 동적인 방식으로 전송 대역을 공유하기 때문에 전송 선로의 이용 효율을 극대화할 수 있다. 회선 교환 시스템에서는 호스트 간 연결 시 전송 대역을 전용으로 할당하기 때문에 해당 호스트들이 데이터를 전송하지 않더라도 다른 호스트는 이 전송 대역을 이용할 수 없다. 결과적으로 회선 교환 시스템은 전송 선로 이용 면에서 비효율적이다.
- **호스트의 무제한 수용**: 회선 교환 방식에는 개별 연결 요청에 대해 고정 대역을 할당하므로 전송 대역이 부족하면 새로운 연결 설정 요청을 수용할 수 없다. 모든 회선 연결에 할당된 대역의 합이 전체 네트워크의 전송 용량을 초과할 수 없다. 그러나 패킷 교환 방식에서는 전송 대역이 부족해 연결 설정 요청을 수용하지 못 하는 경우가 없다. 임의의 연결 요청에 고정 대역을 할당하지 않으므로 이론상 호스트를 무한히 수용할 수 있다. 전송 대역을 사용하는 호스트의 수가 늘면 네트워크 혼잡도가 높아져 패킷 전송 지연이 심화될 뿐이다.
- **패킷에 우선순위 부여**: 패킷 교환 방식을 이용하면 데이터의 전송 작업이 패킷 단위로 이루어져 패킷에 우선순위를 부여하기 편리하다. 즉, 특정 호스트가 전송하는 패킷들을 먼저 전송할 패킷과 나중에 전송해도 되는 패킷으로 구분하여 선택적으로 우선순위를 부여할 수 있다.

패킷 교환 방식에도 단점은 있다. `패킷을 전송하는 과정에서 회선 교환 방식에 비해 더 많은 지연이 발생`한다. 예를 들어, 전송 패킷을 라우터의 내부 버퍼에 보관하는 과정에서 지연이 생기고, 기타 여려 종류의 대기 큐를 거치는 과정에서 가변 지연이 생길 수 있다. 또한 각각의 전송 패킷이 독립적인 경로로 전달되므로, 패킷마다 전송에 걸리는 시간이 일정하지 않을 수 있다. 따라서 전체 데이터의 전송 지연 시간은 가장 늦게 도착한 패킷의 전송 지연에 영향을 받는다. 각 패킷별로 지연되는 정도를 나타내는 지연 분포의 형태도 가변적일 수 밖에 없는데, 이런 `가변적인 전송 지연의 분포`를 **지터**라고 한다. 지터 분포는 멀티미디어 데이터와 같이 실시간으로 처리되는 응용 환경에서 중요하다.

교환기에서 패킷 경로를 선택하는 방식은 두 가지이다. 호스트 사이의 전송 경로를 미리 고정하는 정적 경로와 네트워크 혼잡도를 비롯한 주변 상황에 따라 전송 경로를 지속적으로 조정하는 동적 경로가 있다. 

##### (2) 패킷 교환

###### (1) 가상 회선 

일반적으로 가상 회선 방식은 `연결형 서비스를 지원하기 위한 기능`으로, 연결을 통해 전송되는 `모든 패킷의 경로가 동일`하다. 송수신 호스트 사이에 설정된 가상의 단일 파이프를 통해 송신 호스트가 입력단으로 패킷을 송신하고, 수신 호스트가 출력단에서 패킷을 수신한다. 따라서 모든 패킷이 하나의 파이프로 표현되는 동일 경로로 전송되므로 패킷이 도착하는 순서가 보낸 순서와 같다. 여기서 파이프는 한 프로세스의 출력을 다른 프로세스의 입력으로 사용할 수 있도록 프로세스를 연결하는 논리적 통신 매체이다. 프로세스 뿐 하니라 호스트, 네트워크 등도 사용할 수 있다.

가상 회선 방식으로 패킷을 전송하는 원리는 용어에서 유추할 수 있듯이 회선 교환 방식과 비슷하다. 그러나 가상 회선 방식은 패킷 교환 방식을 기반으로 하므로 데이터의 전송 단위가 패킷 단위로 이루어지는 반면에 회선 교환 방식은 패킷 기능을 지원하지 않는다. 이는 두 교환 방식을 구분하는 중요한 차이점이다.

###### (2) 데이터 그램

패킷 교환 방식에서 `비연결형 서비스를 이용해 독립적으로 전송하는 것`을 **데이터 그램**이라 한다. 데이터그램 방식은 패킷을 송신하기 전에 연결을 설정하는 과정이 없으므로 미리 경로를 할당하지 않는다. 따라서 전송되는 패킷들이 독립적인 경로로 전달된다. 일반적으로 데이터그램 방식은 전송할 양이 적거나 상대적으로 신뢰성이 중요하지 않은 환경에서 사용된다.

##### (3) 프레임 릴레이와 셀 릴레이

패킷 교환 방식이 개발된 시점에는 원거리 디지털 통신 과정에서 지금보다 더 많은 전송 오류가 발생했다. 그래서 전송 패킷에 물리적인 전송 오류를 처리하기 위한 오버헤드 비트를 많이 추가했는데, 이런 패킷들을 처리하는 송수신 시스템의 오류 처리 과정이 상당히 복잡했다. 또한 중간에 위치한 교환 시스템에서 오류를 검색하고 복구하는 기능도 필요했다.

이와 달리 현대의 네트워크는 물리적인 전송 오류가 발생할 확률이 매우 낮다. 과거의 과도한 오류 제어 기능이 현재의 통신 환경에서는 낭비 요소가 된 것이다. 여러 계층에서 수행되는 복잡한 오류 제어 기능 중 중복되는 부분을 제거하면 패킷의 전송 속도를 높일 수 있다. 이처럼 낭비 요소를 제거해 데이터 전송 속도를 향상시키기 위해 프레임 릴레이와 셀 릴레이 방식이 고안되었다.

###### (1) 프레임 릴레이

신뢰도가 높은 새로운 네트워크 환경을 고려해 전송 오류 제어 기능을 더 효율적으로 처리하는 네트워크 프로토콜을 작성할 필요가 있다. 이를 위해 `동일한 속도의 전송 매체로 고속 데이터 전송을 지원`할 수 있도록 고안된 기술이 **프레임 릴레이**이다.

프레임 릴레이 방식에서는 각 라우터의 개별 연결을 의미하는 홉 단위의 흐름 제어와 오류 제어 기능을 수행하지 않는다. 따라서 데이터의 전송과 긍정 응답의 처리가 큰 흐름으로 이루어져, 전송 패킷의 양이 반으로 줄어든다. 이처럼 오류 제어 기능을 단순화 하는 작업만으로도 데이터 전송 효율을 크게 향상 시킬 수 있다.

프레임 릴레이 방식은 연결형 패킷 서비스를 지원한다. 또, 한 호스트에서 수신한 프레임을 다른 포스트로 중개하는 역할만 한다. 오류 복구나 흐름 제어 같은 기능은 수행하지 않으므로 데이터 링크 계층의 기능을 단순하게 설계할 수 있다.

###### (2) 셀 릴레이

**ATM** 방식으로 더 많이 알려진 셀 릴레이 방식은 회선 교환과 패킷 교환 방식의 장점을 모아 고안되었다. 셀 릴레이 방식도 프레임 릴레이 방식처럼 오류 제어에 대한 오버헤드를 최소화 한다.

**프레임 릴레이 방식**은 `가변 길이의 패킷`을 지원하지만 **셀 릴레이 방식**에서는 `셀이라는 고정 크기의 패킷`을 사용한다.  패킷의 크기가 고정되면 가변적인 경우 패킷 처리 과정에서 오버헤드를 더 줄일 수 있다. 셀 릴레이 방식은 2~100Mbps의 전송률을 지원한다.

#### (2) LAN, MAN, WAN

일반적으로 네트워크는 물리적으로 일정 거리 이상 떨어진 위치에서 독립적으로 실행할 수 있는 호스트 간의 데이터 교환  환경을 지원한다. 호스트 사이의 연결 거리를 기준으로 네트워크를 LAN, MAN, WAN으로 구분할 수 있다. 이 연결 거리에는 데이터의 전송 지연에 많은 영향을 미치므로 네트워크를 설계할 때 중요한 고려 사항이 된다.

##### (1) LAN

LAN은 `단일 건물이나 학교 같은 소규모 지역에 위치하는 호스트로 구성된 네트워크`이다. 규모가 아주 작을 때는 단일 전송 케이블로 모든 호스트를 연결할 수 있다. LAN은 MAN이나 WAN 환경보다 호스트 간의 간격이 가깝기 때문에 데이터를 **브로드 캐스팅**방식으로 전송한다.

호스트 사이의 물리적 거리는 데이터 전송 과정에 영향을 많이 끼친다. 가까울수록 데이터 전송 지연이 적으며, 전송 오류가 발생할 가능성도 낮아진다. LAN에서는 보통 수십 Mbps ~ 수 Gbps의 전송 속도를 지원한다. LAN  환경에서 호스트를 연결하는 방식을 구성 형태에 따라 버스형, 링형으로 구분한다.

###### (1) 버스형

버스형은 공유 버스 하나에 여러 호스트를 직접 연결한다. 한 호스트가 전송한 데이터를 네트워크에 연결된 호스트에 전송하므로 브로드캐스팅 방식이다.

![3-2. 버스형](C:\Users\SH.C\Desktop\네트워크\3-2. 버스형.png)

버스형에서는 전송 데이터가 모든 호스트에 전송되므로 라우팅 기능이 따로 필요 없다. 목적지에 해당하는 호스트만 데이터를 내부 버퍼에 보관하고 나머지 호스트들은 데이터를 버림으로써 한 호스트만 데이터를 수신한다. 이를 위해 각 호스트를 구분하는 호스트 주소를 사용하고, 전송 데이터에는 송수신 호스트의 주소를 표기한다.

`둘 이상의 호스트에서 데이터를 동시에 전송`하려고하면 공유 버스에서 **충돌**이 발생할 수 있다. 충돌 문제를 해결하는 방법에는 `충돌 가능성 자체를 차단`하는 **사전 해결 방식**과 `충돌을 허용하고 나중에 해결`하는 **사후 해결 방식**이 있다. 대표적인 버스형 연결 형태인 **이더넷**은 충돌이 발생하는 것을 허용하는 대신, 충돌 후에 문제를 해결하는 사후 해결 방식이다.

이더넷 방식의 LAN은 원래 1~10Mbps의 전송 속도를 지원 했지만, 100Mpbs, 1Gbps의 고속 이더넷이 등장하면서 영상 데이터처럼 높은 전송률이 필요한 응용 환경에서도 사용할 수 있게 되었다.

###### (2) 링형 

**링형**은 전송 호스트의 `연결이 순환 구조인 링 형태`이다. 데이터는 시계나 반시계 방향으로 전송되며, 특정 호스트에서 전송한 데이터는 반드시 링을 한 바퀴 돌아 송신 호스트로 되돌아온다. 따라서 네트워크에 연결된 모든 호스트가 전송 데이터를 수신하는 브로드캐스팅 방식을 지원한다. 데이터를 송신한 호스트는 자신에게 되돌아온 데이터를 네트워크에서 회수할 책임이 있다.

![3-3. 링형](C:\Users\SH.C\Desktop\네트워크\3-3. 링형.png)

링형도 둘 이상의 호스트에서 데이터를 동시에 전송하면 충돌이 발생할 수 있으므로 이 문제를 고려해야 한다. 일반적으로 링형에서 토큰이라는 제어 프레임을 사용해 충돌 가능성을 제어한다. 데이터를 전송할 호스트는 사전에 전송용 토큰을 확보해야 한다. 네트워크에는 토큰이 하나만 존재하도록 설계되므로 특정 시간에 데이터를 전송할 수 있는 호스트는 하나 뿐이다. 따라서 호스트 사이에 충돌이 발생할 가능성을 미리 차단할 수 있다. 토큰은 네트워크에 연결된 호스트를 모두 순환하도록 설계되었기 때문에 모든 호스트가 동등한 전송 기회를 갖는다.

##### (2) MAN

**MAN**은 LAN보다 큰 지역을 지원한다. 사용하는 하드웨어와 소프트웨어는 LAN과 비슷하지만 연결 규모가 더 크다. MAN은 근처에 위치한 `여러 건물이나 한 도시에서의 네트워크 연결`로 구성할 수 있다.

MAN을 위한 국제 표준안은 **DQDB(Distributed Queue Daul Bus)**이다. 이 규격은 전송 방향이 다른 두 버스로 모든 호스트를 연결하는 구조를 지원한다. DQDB는 비디오와 그래픽 응용 환경을 위한 광 LAN을 위해 개발되었지만 DQDB 구조가 MAN 환경에 적합하여 MAN의 표준안으로 채택 되었다. 그 후 케이블 TV 산업에 의해 개발이 촉진되었다.

DQDB의 특징은 세 가지로 요약할 수 있다. 첫째, 분산 데이터 큐를 유지한다. 둘째, 데이터를 전송할 때 발생할 수 있는 충돌 문제를 해결하기 위해 슬롯 링 개념을 변형한 FIFO 기반의 공유 슬롯 방식을 사용한다. 마지막으로, ATM과 호환이 가능하도록 53바이트의 프레임을 지원한다.

##### (3) WAN

**WAN**은 `국가 이상의 넓은 지역을 지원하는 네트워크 구조`이다. LAN과 MAN의 구성에서는 전송 호스트가 공유 버스를 이용한 브로드캐스팅을 지원하기 때문에 교환의 개념이 필요 없다. 그러나 **점대점**으로 연결된 WAN 환경에서는 전송과 더불요 교환 기능이 반드시 필요하다.

WAN에서는 전송 매체를 이용해 호스트를 일대일로 연결하는 방식으로 네트워크를 확장한다. 어떤 호스트가 어떻게 연결되는지에 따라 WAN의 종류가 다양하다. WAN에서는 데이터가 전달되는 과정에 교환 기능이 필요하다.

WAN에서는 호스트 사이의 거리가 멀기 때문에 연결의 수가 증가할수록 전송 매체를 많이 사용하므로 비용이 많이 든다. 따라서 총 거리를 줄이면서 전체 호스트를 효율적으로 연결하도록 설계해야 한다. WAN에선느 호스트를 스타형, 트리형, 완전형, 불규칙형 등 다양한 구조로 연결할 수 있다.

#### (3) 인터네트워킹

라우팅 장비는 네트워크 내부에서 패킷 교환 기능을 수행하는데, `둘 이상의 서로 다른 네트워크를 연결`하는 기능을 **인터네트워킹**이라 한다. 인터네트워킹을 지원하려면 연결 되는 네트워크의 차이를 분석해, 전송 데이터를 적절히 중개할 수 있어야 한다.

두 개의 네트워크를 연결하는 장비는 역할이 어느 계층에 속하느냐에 따라 종류가 달라진다. 일반적으로 하위 3개의 계층인 물리 계층, 데이터 링크 계층, 네트워크 계층의 기능을 수행하며, 특별히 네트워크 계층까지의 기능을 수행하는 장비는 **라우터**이다.

네트워크 간의 차이는 다양한 방법으로 기술할 수 있다. 예를 들어, 연결형 비연결형 서비스, 데이터 전송에 사용되는 프로토콜의 종류, 호스트를 구분하기 위한 주소 표현 방법, 전송 패킷의 크기, 멀티 캐스팅 브로드캐스팅의 지원 여부 등이 고려 대상이다.

네트워크 장비는 수행 기능에 따라 리피터, 브리지, 라우터로 구분한다. 참고로 데이터 링크 계층은 MAC 계층과 LLC 계츠으로 나뉘며, MAC 계층이 하위에 위치하고 LLC 계층은 상위에 위치한다.

- **리피터**: 리피터는 계층 1 기능을 지원한다. `한쪽 단에서 들어온 비트 신호를 증폭하여 다른 단으로 단순히 전달하는 역할`을 한다.
- **브리지**: 브리지는 계층 2 기능을 지원한다. `한쪽 단에서 들어온 프레임의 MAC 계층 헤더를 다른 단의 MAC 계층 헤더로 변형해 전송`할 수 있어 다른 LAN을 연결할 수 있다. 브리지가 수신한 프레임의 목적지 주소와 소신 호스트의 주소가 같은 LAN에 소속되어 있으면 브리지는 아무 행동도 하지 않는다. 그러나 송수신 호스트의 위치가 서로 다른 LAN에 속하면 중개 기능을  수행한다. 따라서 브리지는 리피터보다 LAN과 LAN 사이의 불필요한 트래픽 발생을 줄일 수 있다.
- **라우터**: 라우터는 계층 3 기능을 지원한다. `교환 기능을 수행`할 수 있으므로 여러 포트를 사용해 다수의 LAN을 연결하는 구조를 지원한다. `수신한 패킷을 해석해 적절한 경로로 전송하도록 경로를 배정`하는 기능을 한다.

일반적으로 상위 계층의 개념인 게이트웨이는 서로 다른 응용 환경을 지원하기 위해 사용할 수 있으므로, 네트워크 양단의 특성이 다른 환경에서 중개하는 역할을 수행한다.

##### (1) 브리지

브리지는 좌우에 위치하는 LAN은 종류가 같을 수도 있고, 다를 수도 있따. 예를 들어 양쪽 LAN이 모두 이더넷을 사용하면 프레임 헤더를 해석하는 간단한 작업을 통해 쉽게 중개할 수 있다. 하지만 종류가 다르면 프레임 변환 등의 복잡한 과정이 필요하다.

![3-4. 브리지의 역할](C:\Users\SH.C\Desktop\네트워크\3-4. 브리지의 역할.png)

다음은 계층 2의 기능을 수행하는 일반 브리지의 역할을 보여준다. 브리지는 MAC 계층을 지원하므로 물리 계층과 MAC 계층의 기능을 수행하고 이를 관리하기 위해 상위에 자체 관리 소프트웨어가 존재한다. 위의 그림은 양쪽 LAN이 종류가 달라 한쪽 LAN의 헤더를 제거하고 다른 쪽 LAN의 헤더를 붙여주는 과정이다.

###### (1) 트랜스페런트 브리지

브리지 사용자는 전송하는 프레임의 주소부에 라우팅에 관한 정보를 추가하지 않아도 되며, 필요한 라우팅 과정은 브리지가 자동으로 수행한다. 설치 과정에서 하드웨어의 조정이나 소프트웨어의 변경, 주소, 라우팅 테이블 관련 사항을 고려할 필요가 없다.

브리지에 연결된 임의의 LAN으로부터 프레임이 도착했을 때, 브리지가 수행하는 동작은 두 가지 중 하나이다. 첫째, 해당 프레임의 수신 호스트가 송신 호스트와 동일한 방향에 위치한 경우는 프레임을 중개한느 과정이 필요 없기 때문에 무시해도 된다. 둘째, 프레임의 수신 호스트가 송신 호스트가 다른 방향에 위치하는 경우는 수신 호스트가 있는 방향으로 프레임을 중개해야 한다. 이 과정에서 브리지 내부에는 송수신 호스트가 동일한 방향에 있는지와 수신 호스트가 브리지의 어느 방향에 위치하는지에 대한 정보가 있어야 한다.

- **라우팅 테이블**: 트랜스페런트 브리지가 제대로 동작하려면 라우팅 테이블 정보가 정확해야 한다. 라우팅 테이블은 LAN이 동작하면서 자동으로 생성되는데, 이 과정을 요약하면 다음과 같다. 먼저 브리지에 전원이 들어오면 라우팅 테이블의 내용이 비어, 초기에는 프레임의 수신자가 어느 쪽 포트에 위치하는지 판단할 수 없다. 그러므로 이 경우에는 **플러딩 알고리즘**을 사용해 입력된 프레임을 브리지의 모든 포트 방향으로 전달한다.

  플러딩 알고리즘의 동작 과정에서 브리지에 입력된 프레임의 송신 호스트 주소를 근거로 송신 호스트가 몇 번 포트에 연결되었는지 알 수 있다. 데이터 전달 과정에서 얻은 프레임의 송신 호스트 주소와 포트 번호의 정보를 반영한다.

  위 방법을 사용하면 시간이 경과함에 따라 라우팅 테이블의 정보가 계속 누적되므로 라우팅 정보를 효과적으로 수집할 수 있다. 또 호스트의 연결 위치를 변경해도 라우팅 정보를 자동으로 갱신할 수 있다. 이처럼 `네트워크의 동작 과정에서 라우팅 정보를 얻는 방식`을 **역방향 학습 알고리즘**이라 한다.

- **스패닝 트리**: 역방향 학습 알고리즘을 이용하면 라우팅 정보를 효과적으로 얻을 수 있다. 그러나 네트워크에 이중 경로가 존재하면 잘못된 라우팅 정보를 얻을 수 있다. 이런 문제점을 해결하려면 이중 경로가 존재하지 않도록 네트워크를 설계해야 한다. 네트워크의 설계 과정에서 순환 구조가 불가피하게 만들어지면 네트워크의 논리적인 연결 상태를 비순환 형태로 간주함으로써, 역방향 학습 알고리즘이 올바르게 동작하도록 해야 한다. `네트워크의 비순환 구조`를 **스패닝 트리**라 하고, 이를 지원하는 알고리즘을 **스패닝 트리 알고리즘**이라 한다.

  스패닝 트리를 구성하려면 먼저 임의의 브리지를 트리 구조의 최상위 브리지인 루트로 지정해야 한다. 이를 위해 브리지가 자신의 고유 번호를 서로 공개함으로써 번호가 가장 낮은 브리지를 루트로 선정할 수 있다. 그런 다음, 루트 브리지에서 다른 모든 브리지까지의 최단 경로 트리를 구성하는 방식으로 LAN을 구축하는 과정을 밟는다.

###### (2) 소스 라우팅 브리지

일반적으로 **소스 라우팅 브리지**는 링 구조의 네트워크에서 사용한다. 이 방식은 이름처럼 프레임이 수신 호스트까지 도달하기 위한 라우팅 정보를 송신 호스트가 제공한다. 즉, `송신 프레임 내부에 수신 호스트까지 도달하기 위한 모든 경로를 기술`함으로써, 중간 브리지에 필요한 라우팅 정보가 프레임 자체에 포함된다. 프레임을 수신한 브리지는 이 정보를 이용해 프레임을 적절한 경로로 전달한다.

##### (2) IP 인터네트워킹

인터넷 환경에서 IP 프로토콜을 사용해 IP 인터네트워킹을 지원하려면 송수신 호스트 간의 여러 네트워크 인터페이스를 거쳐 패킷을 전달할 수 있어야 한다. 패킷을 올바르게 중개하기 위해 라우터들은 IP 프로토콜까지의 계층 기능을 지원하고, 송수신 호스트는 TCP/IP 응용 프로그램을 이용해 통신한다.

![3-5. IP 인터네트워킹의 구조](C:\Users\SH.C\Desktop\네트워크\3-5. IP 인터네트워킹의 구조.png)

라우터는 양쪽 MAC 계층의 차이를 해결하는 기능이 필요하다. 이더넷 헤더로 입력된 패킷을 PPP 헤더나 ATM헤더로 변환하여 서로 다른 계층에서의 통신을 가능하게 지원해야 한다. 라우터에 연결된 네트워크가 동일한 종류의 MAC 계층을 사용하면 MAC 헤더의 변환 과정은 이루어지지 않는다.

헤더 변환 과정과는 별도로, 라우터를 거치는 동안에 전송되는 패킷이 특정 MAC 계층에서 전송하기에 너무 크면 패킷의 분할과 병합 과정이 이루어진다.

##### (3) 인터넷 라우팅

라우터의 역할은 수신된 IP 데이터그램을 적절한 경로로 전달하는 것이다. 그러려면 인터넷의 전체 구성과 현재 상태에 대한 정보를 활용해 경로를 선택해야 한다. 대표적인 라우팅 방식으로 고정 경로 배정과 적응 경로 배정이 있다.

###### (1) 고정 경로 배정

**고정 경로 배정**은 간단한 구현 만으로도 효과적인 라우팅이 가능한 방법으로, `송수신 호스트 사이에 영구불변의 경로를 배정`한다. 단점은 전송 경로가 고정되므로 트래픽 변화에 따른 동적 경로 배정이 불가능하다는 점이다 그러나 송수신 호스트 사이의 트래픽을 미리 측정하여 고정 경로를 적절히 배정하면 간단하고 효율적인 라우팅이 가능하다.

###### (2) 적응 경로 배정

**적응 경로 배정**에서는 `인터넷  연결 상태가 변하면 이를 데이터그램의 전달 경로에 반영`한다. 이때 결정에 영향을 주는 요소는 크게 두 가지이다. 하나는 특정 네트워크나 라우터가 정상적으로 동작하지 않는 경우이고, 다른 하나는 네트워크의 특정 위치에서 혼잡이 발생하는 경우이다.

적응 경로 배정은 이론적인 타당성에도 불구하고, 단점이 있다. 경로를 결정하는 과정이 복잡해지면 이를 처리하는 라우터의 부담이 증가하는데, 인터넷처럼 복잡한 망에서 이것은 상당히 부담스러운 작업이다.

네트워크에서의 변화는 내부적으로 상태 정보에 대한 처리를 수반한다. 그러나 특정 위치에서 어떤 변화가 발생했을 때 네트워크의 모든 라우터에 동시에 반영하는 것은 현실적으로 불가능하므로, 라우터들끼리 정보의 불일치성이 발생할 수 있다. 이러한 불일치성을 해소하려면 라우터 상이의 정보 교환을 빠르게 자주 이루어져야 한다. 하지만 이것도 네트워크의 트래픽을 증가시키고, 라우터의 처리 부담을 증가시키는 결과를 초래한다.

###### (3) 자율 시스템

**자율 시스템**은 다수의 라우터로 구성할 수 있으며, 라우터들은 서로 공통의 라우팅 프로토콜을 사용해 정보를 교환한다. 자율 시스템은 `동일한 라우팅 특성에 의해 동작하는 논리적인 단일 구성체`라고 볼 수 있다.

자율 시스템 내부에서 사용하는 `공통 프로토콜`을 **내부 라우팅 프로콜**이라 하며, 라우터들끼리 라우팅 정보를 교환하는 용도로 사용한다.

학교 같은 인터넷 환경에서는 각 건물을 라우터로 연결해 자율 시스템을 구성할 수 있고, 외부의 자율 시스템과도 연결한다. 이러한 구조에서는 자율 시스템이 사용하는 알고리즘과 라우팅 테이블 정보의 구조가 서로 다를 수 있으므로, 자율 시스템 사이의 연동을 위한 방안을 고려해야 한다. `서로 다른 자율 시스템들 간에 사용하는 라우팅 프로토콜`을 일반적으로 **외부 라우팅 프로토콜**이라 한다.

#### (4) 서비스 품질 (QoS)

네트워크에서 품질은 보통 데이터를 어느 정도로 신뢰성 있게 전송하는지를 의미한다. 즉, 전송 과정에서의 데이터 분실, 전송 지연, 지연 값의 일관성(지터) 등을 기준으로 전송 품질을 판단할 수 있다.

네트워크가 사용자에게 제공하는 서비스는 매우 다양하기 때문에 네트워크 서비스 품질은 한마디로 규정하기는 어렵다. 하지만 네트워크 서비스 제공자와 사용자 사이의 기본 서비스 품질은 특정 네트워크 서비스를 사용자에게 제공하는지 여부에서 출발한다. 그리고 이를 바탕으로 서비스를 이용하는 데 있어서 네트워크가 서비스의 특성에 부합하도록 어느 수준까지 올바르게 동작하는 지를 판단해야 한다.

사용자에게 제공되는 네트워크 서비스를 등급에 따라 분류할 수 있는데, 이를 서비스 클래스라 한다. 서비스 클래스와 서비스 품질은 비슷한 의미로 해석할 수 잇지만, 서비스 클래스가 서비스를 좀 더 세부적으로 분류한다.

##### (1) QoS의 개요

인터넷 환경에서 QoS는 중요한 고려 대상 중 하나이다. 전송 서비스의 좋고 나쁨을 판단하는 기준은 사용자의 관점에 따라 다양하지만 대부분 QoS로 정의할 수 있다. QoS의 기준은 보통 연결형 서비스를 위한 것이지만, 비연결형 서비스에도 부분적으로 적용된다.

QoS는 주로 전송 계층 사용자가 요청하므로 전송 계층 연결을 설정할 때 필요한 서비스의 정도를 매개변수로 표시한다. QoS 서비스를 지원하려면 전송 계층에 해당 기능을 구현해야 하는데, 하위의 네트워크 계층이 기능의 일부를 수행할 수 있으면 전송 계층의 역할이 그만큼 줄어든다.

자주 언급되는 QoS의 매개변수는 다음과 같다.

- **연결 설정 지연**: 연결 설정을 위한 request 프리미티브 발생과 confirm 프리미티브 도착 사이의 경과 시간이다. 일반적으로 경과 시간이 짧을수록 서비스 품질이 좋ㅇ며, 네트워크 혼잡도 등의 영향을 많이 받는다. 연결 해제 요구에도 동일한 기준을 적용할 수 있다.
- **연결 설정 실패 확률**: 연결 설정 실패 확률은 임의의 최대 연결 설정 지연 시간을 기준으로 연결 설징이 이루어지지 않을 확률이다. 연결 해제 요구에도 동일한 기준을 적용할 수 있다.
- **전송률**: 임의의 시간 구간에서 초당 전송할 수 있는 바이트 수이다. 전송률은 양방향 값이 다를 수 있으므로, 별개로 다루어져야 한다.
- **전송 지연**: 송신 호스트가 데이터가 수신 호스트에 도착할 때까지 경과한 시간이다. 전송률처럼 양방향이 따로 다루어진다.
- **전송 오류율**: 임의의 시간 군간에서 전송된 총 데이터 수와 오류 발생 데이터 수의 비율이다.
- **우선순위**: 다른 연결보다 먼저 처리함을 의미한다. 우선순위가 높은 연결이 우선순위가 낮은 연결보다 좋은 서비스를 제공 받는다.

##### (2) 인터넷에서의 QoS

IP 프로토콜은 원칙적으로 모든 패킷에 의해 동일한 기준을 적용해 목적지까지 데이터를 중개한다. 특히 데이터의 도착 순서나 데이터의 100% 수신 등을 보장하지 않기 때문에 버퍼를 사용해 이 문제를 해결한 후에 응용 계층으로 데이터를 전달해야 한다. IP 프로토콜을 이용해 실시간 서비스를 제공하려면 약간의 시간을 미리 확보해 데이터를 버퍼에 저장하는 작업이 선행되어야 한다. 따라서 첫 번째 데이터가 응용 환경에 전달되는 시점은 전송 지연시간보다 더 늦어진다.

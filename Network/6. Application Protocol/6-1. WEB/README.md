## (6) 응용 프로토콜
### (1) 웹
#### (1) 웹 서비스
전 세계적으로 웹 서버의 TCP 포트 번호는 80번(Well-kwnon)으로 지정되어 있다. 클라이언트의 웹 브라우저는 이 포트 번호를 이용해 서버와 연결을 시도한다. 웹 서버와 연결이 설정되면, 클라이언트의 정보 요구에 대해 서버가 웹 문서를 회신하는 방식으로 응답한다. 서버가 전송한 문서 내용은 클라이언트의 웹 브라우저를 통해 사용자 화면에 표시된다.

클라이언트와 서버 사이의 연결은 사용자의 정보 요구가 발생할 때마다 새로운 연결 설정을 하고 해제하는 과정을 반복한다. 서버가 제공하는 정보의 전송은 TCP 연결에 의해 이루어지지만, 웹 문서의 전송이 완료되어 사용자가 웹 브라우저로 보는 시점에는 TCP 연결이 이미 해제된 상태이다.

##### (1) 클라이언트-서버 모델
**URL**은 `웹 서버를 지칭할 때 사용하는 주소`이다. Uniform Resource Locator의 약자로 사용하는 프로토콜, 서버의 호스트 이름, 서버 내부의 파일 경로명으로 구성되어 있다. 예로 http://www.korea.co.kr/welcome.html 이라는 URL이 존재한다고 한다면 http라는 프로토콜을 사용하고 www.korea.co.kr 이라는 웹 서버에 존재하는 welcome.html 파일을 요청하는 것을 의미한다.
**HTTP**는 `클라이언트의 요청과 서버의 응답 정보를 전송하기 위한 목적으로 구현된 프로토콜`이다. HyperText Transfer Protocol의 약자이다.

![13-1  웹 서비스의 동작 원리](https://user-images.githubusercontent.com/56579239/165051358-e1410707-c7e8-4127-8af0-a158d785c478.jpg)

사용자가 웹 브라우저에게 웹 서버의 URL 주소를 입력하면 웹 브라우저가 DNS 서버에게 웹 서버의 호스트 이름을 IP 주소로 변경을 요청한다. 웹 브라우저가 IP주소와 포트 번호(80번)를 이용하여 웹 서버와 TCP 연결을 시도한다. 웹 브라우저가 웹 서버에게 최초 화면을 위한 GET 명령을 전송하면 웹 서버가 웹 브라우저에게 요청한 웹 문서를 회신한다. 웹 브라우저와 웹 서버 사의의 연결을 해제하고 웹 브라우저가 사용자 화면에 웹 문서를 출력하게 된다.

##### (2) APM의 웹 서비스 구조

**APM**은 `Apache, PHP, MySQL`를 합쳐 부르는 말이다. 아파치는 웹 서버 프로그램이고 PHP는 HTML 언어의 기능을 보안하는 역할을 하며 MySQL은 데이터베이스 기능을 지원하는 프로그램이다. PHP는 모든 종류의 운영체제에서 지원하며 MySQL과 연동하기 쉽다. 

![13-2  APM의 동작 원리](https://user-images.githubusercontent.com/56579239/165051370-39d72b11-0abc-4e5f-a12e-3992352fe968.jpg)

APM의 동작 원리를 살펴보면 먼저 웹 브라우저가 아파치에 웹 문서를 요청한다. PHP 코드가 존재하면 처리를 위해 PHP에 요청을 한다. 데이터베이스 처리가 필요할 경우 MySQL에 요청을 하게 된다. 데이터베이스 결과가 먼저 회신되고 이 후 PHP가 실행 결과인 HTML 코드를 회신한다. 이를 아파치가 웹 문서를 웹 브라우저에 회신을 하는 과정으로 화면에 보여 지게 된다.

PHP 코드는 HTML 문서 안에 Embedded 형식으로 작성된다. <?와 ?>를 이용하여 구분을 하게 되어 PHP 코드가 포함된 문서의 확장자는 .php로 작성한다. 웹 브라우저에 회신되는 내용은 PHP 코드가 작성된 HTML 코드가 나오게 된다. PHP 코드는 서버에서 실행되고 결과만 나오게 되는 것이다.

#### (2) HTML
HTML은 HyperText Markup Language의 약자로 웹 브라우저에서 데이터를 어떻게 표시하는지를 나타내는 역할을 하는 언어이다. HTML로 작성한 문서는 서버에 보관되고 클라이언트는 그 문서를 받아 화면에 표시한다.

#### (3) HTTP
**HTTP**는 `분산 하이퍼미디어 환경에서 빠르고 간편하게 데이터를 전송하는 프로토콜`이다. HTTP는 80번 포트를 사용하도록 정의된다. 따라서 HTTP 서버는 80번 포트에서 대기하고, 클라이언트는 TCP를 사용해 연결을 설정한다.

웹 브라우저는 URL을 이용하여 원하는 자원을 표현한다. HTTP 메소드를 이용하여 데이터를 요청하거나 회신하는 과정을 반복한다. 예를 들어, HTTP를 이용해 웹 정보를 얻으려면 http://www.korea.co.kr과 같이 url 주소 앞에 http 프로토콜을 명시해야 한다. 

HTTP는 클라이언트-서버 모델이므로 요청과 응답이 클라이언트와 서버로 존재한다. 요청은 HTTP 클라이언트가 서버에 요청을 전송하는 것이고 응답은 HTTP 서버가 요청의 결과인 응답 코드가 포함된 정보를 회신하는 것이다. 클라이언트가 서버에 요청할 때에는 GET 메서드를 사용하고 클라이언트에서 서버로 회신할 때는 POST 메서드를 사용한다. 

##### (1) 비상태 연결
![13-3  요청과 응답](https://user-images.githubusercontent.com/56579239/165051376-3070e982-ed97-4218-9543-6575c27ae256.jpg)

비상태 연결은 요청과 응답 이후 연결이 끊어지는 프로토콜을 의미하는데 HTTP의 경우 `요청과 응답이 진행되고 TCP 연결이 해제`되기 때문에 둘 사이에는 연결 존재에 따른 상태 정보가 존재하지 않아 **비상태 프로토콜**로 분류된다.

##### (2) 요청 메시지
요청 메시지는 요청문과 헤더, 공백, 바디로 구성된다. 요청문은 요청 메서드와 URL, HTTP 버전으로 구성된다. 

![13-4  요청 메시지의 구조](https://user-images.githubusercontent.com/56579239/165051384-c5a80d12-3961-424d-b0b6-e16649a69f22.jpg)

요청 메서드에는 GET, HEAD, POST, PUT이 있다.
- **GET**: URL이 가리키는 웹 문서 전송을 요청하는 기능을 한다.
- **HEAD**: 문서 내용보다 특정 문서에 대한 정보만을 요청하는 기능을 한다.
- **POST**: 클라이언트가 서버에 정보를 전송하는 기능을 한다. 
- **PUT**: 클라이언트가 서버에 문서 전송하는 기능을 한다.

##### (3) 응답 메시지
요청 메시지와 유사하나 요청문 대신 상태문을 사용한다. 상태문에는 HTTP 버전과 상태 코드, 상태 이름이 들어가게 된다. 

![13-5  응답 메시지의 구조](https://user-images.githubusercontent.com/56579239/165051391-0410be4d-182c-498e-bd2f-dd983b8783b6.jpg)

대표적으로 자주 쓰이는 상태 코드는 다음과 같다.

![13-6  HTTP 상태 코드](https://user-images.githubusercontent.com/56579239/165051402-6a931799-e25b-45e8-b9e1-5e92fb4998d9.png)

#### (4) CGI
**CGI**는 Common Gateway Interface의 약자인데 HTML로만 웹 문서를 작성하는 경우 서버의 정보만을 일방적으로 받아들이는 단방향 정보 흐름에서 `사용자가 입력하는 정보에 따른 처리 기능을 제공하는 기능을 수행`한다. 독립된 개발과 컴파일, 개별 프로세스로 처리하는 부담 때문에 `스크립트 언어`를 선호하여 작성된다.

![13-7  CGI의 구조](https://user-images.githubusercontent.com/56579239/165051407-d3c828d7-ee03-4860-b151-c0f2ec080f36.jpg)

<br>
<br>
<br>
<br>

#### [참고 자료 - [ITstory]](https://copycode.tistory.com/118)
